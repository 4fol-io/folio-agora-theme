{"version":3,"sources":["webpack://agora-folio/./src/js/modules/utils.js","webpack://agora-folio/./src/js/modules/widgets.js","webpack://agora-folio/./src/js/modules/tree.js","webpack://agora-folio/./src/js/app.js","webpack://agora-folio/external \"jQuery\""],"names":["debounce","callback","wait","immediate","timeout","callNow","next","apply","arguments","clearTimeout","setTimeout","isMobile","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","any","goTo","elm","behavior","offset","top","getBoundingClientRect","window","scrollY","document","documentElement","scrollTop","toFixed","onScrollTo","pageYOffset","removeEventListener","addEventListener","scrollTo","sortParticipants","$block","orderBy","attr","orderByAlt","order","$container","find","children","sort","a","b","orderA","$","orderB","orderC","orderD","appendTo","setupWidgets","each","this","$sortbtn","$sortby","$sort","on","val","text","data","e","preventDefault","prop","DIR_NEW","treeCount","treePaths","treeData","setEvents","$doc","$this","$target","closest","toggleClass","hasClass","collapse","removeClass","addClass","loadMoreComments","getTreePaths","j","i","level","$items","length","item","parents","id","getTreeNodePath","getTreeNodeElm","renderPath","idx","_l","_s","_path","_data","$item","_collapsed","_cls","Math","min","agoraFolioData","t","expandCollapse","$node","html","prepend","deepClasses","_xs_deep_cls","_sm_deep_cls","push","join","last","_post_id","_dir","_pages","parseInt","$more","_page","post","url","ajaxurl","_ajax_nonce","nonce","action","post_id","page","beforeSend","loading","done","result","$result","before","loadMore","remove","fn","pdfEmbedder","fail","always","themeData","jQuery","$body","$win","$goup","isSingle","GRID_VIEW","TREE_VIEW","currentView","innerWidth","clientWidth","body","onResize","truncate","fitThumb","onScroll","appendExternalIcon","append","externalLink","getOffset","$header","$menu","height","textContent","shave","removeAttr","scrollToArea","$anchor","$collapse","delay","x","scrollX","y","parent","focus","location","hash","setupView","$collapsible","listAjax","loadContent","view","Cookies","setView","paramName","paramValue","pattern","RegExp","search","replace","indexOf","history","replaceState","replaceUrlParam","href","cookies","expires","setupEvents","listComments","trigger","$parent","$respond","$reply","firstChild","leaveReply","hide","tinyMCE","editor","tinymce","get","editor_switch","switchEditors","go","editor_hidden","isHidden","settings","EditorManager","execCommand","resetCommentEditor","$elm","first","addComment","_agora_folio_theme_moveForm","moveForm","commId","parentId","respondId","postId","returnValue","$place","prependTo","checkValidity","stopPropagation","el","querySelector","tooltip","animated","evaluation_enable_publish","slideUp","evaluation_disable_publish","evaluation_load_grade_feedback","activityid","$box","$loading","show","ajax","type","getFeedbackGradeAction","success","response","grade","feedback","content","publish_grade","evaluation_mark_grade","evaluation_publish_grade","evaluation_tinymce_set_content","message","error_loading_grade","evaluation_set_grade_select","elem","editor_id","textarea_id","wpActiveEditor","$textarea","$editor","setContent","evaluation_show_help_information","evaluation_tinymce_get_content","getContent","pdf_url","img","$img","w","naturalWidth","h","naturalHeight","width","console","log","complete","objectFitImages","megamenu","$toggle","cls","closeMenu","$truncate","setupMenu","dropdown","$modal","modal","activityId","visibility","result_holder","ko_icon","saving","setGradeAction","$btn","evaluated","error_saving_grade","setupEvaluation","module","exports"],"mappings":"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","file":"/js/app.js","sourcesContent":["/**\n  * Debounce ES6 implementation\n  * https://gist.github.com/beaucharman/1f93fdd7c72860736643d1ab274fee1a\n  */\nexport const debounce = function (callback, wait, immediate = false) {\n    let timeout = null;\n    return function() {\n      const callNow = immediate && !timeout;\n      const next = () => callback.apply(this, arguments);\n\n      clearTimeout(timeout);\n      timeout = setTimeout(next, wait);\n\n      if (callNow) {\n        next();\n      }\n    }\n};\n\n/**\n * Mobile devices detection\n */\nexport const isMobile = {\n    Android: function() {\n        return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry: function() {\n        return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS: function() {\n        return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera: function() {\n        return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows: function() {\n        return navigator.userAgent.match(/IEMobile/i);\n    },\n    any: function() {\n        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n    }\n};\n\n\n/**\n * Go to Behaviour\n */\nexport const goTo = function (elm, behavior, offset, callback) {\n  behavior = behavior || 'smooth';\n  offset = offset || 0;\n\n  const top = (elm.getBoundingClientRect().top + (window.scrollY || document.documentElement.scrollTop) - offset).toFixed();\n\n  const onScrollTo = function () {\n    if (window.pageYOffset.toFixed() === top) {\n      window.removeEventListener('scroll', onScrollTo)\n      if (callback) callback()\n    }\n  }\n\n  window.addEventListener('scroll', onScrollTo)\n  onScrollTo()\n\n  window.scrollTo({\n    top: top,\n    behavior: behavior\n  })\n\n};\n\n\n/**\n * Aux method object length\n *\n * @param {object} obj\n */\nexport const count = function(obj){\n  if( $.isPlainObject(obj) || Array.isArray(obj) )\n    return $.map(obj, function() { return 1; }).length;\n  return 0;\n};\n\n\n/**\n  * Replace querystring parameter or add it\n  * @param {string} url \n  * @param {string} paramName \n  * @param {string} paramValue \n  * @returns \n  */\nexport const replaceUrlParam = function (url, paramName, paramValue) {\n    if (paramValue == null) {\n        paramValue = '';\n    }\n    var pattern = new RegExp('\\\\b('+paramName+'=).*?(&|#|$)');\n    if (url.search(pattern)>=0) {\n        url = url.replace(pattern,'$1' + paramValue + '$2');\n    } else {\n      url = url.replace(/[?#]$/,'');\n      url = url + (url.indexOf('?')>0 ? '&' : '?') + paramName + '=' + paramValue;\n    }\n    if(history){\n      history.replaceState(null, null, url );\n    }\n    return url;\n}","/**\n * Agora Folio Widgets Module\n */\n\n/**\n * Sort participants block\n * @param {object} $block filters block element\n */\nexport const sortParticipants = function ($block) {\n\n  const orderBy = $block.attr('data-orderby');\n  const orderByAlt = orderBy === 'name' ? 'surname' : 'name';\n  const order = $block.attr('data-order');\n  const $container = $block.find('.list--participants');\n\n  $container.children('li').sort(function (a, b) {\n    const orderA = $(a).attr('data-' + orderBy);\n    const orderB = $(b).attr('data-' + orderBy);\n    if (orderA === orderB) {\n      const orderC = $(a).attr('data-' + orderByAlt);\n      const orderD = $(b).attr('data-' + orderByAlt);\n      if (order === 'ASC') {\n        return (orderC < orderD) ? -1 : (orderC > orderD) ? 1 : 0;\n      } else {\n        return (orderD < orderC) ? -1 : (orderD > orderC) ? 1 : 0;\n      }\n    } else {\n      if (order === 'ASC') {\n        return (orderA < orderB) ? -1 : (orderA > orderB) ? 1 : 0;\n      } else {\n        return (orderB < orderA) ? -1 : (orderB > orderA) ? 1 : 0;\n      }\n    }\n  }).appendTo($container);\n\n}\n\n\n/**\n * Initialice widgets\n */\nexport const setupWidgets = function () {\n\n  $('.block--participants').each(function () {\n\n    const $block = $(this);\n    const $sortbtn = $block.find('.btn-participants-sort');\n    const $sortby = $block.find('input.participants-orderby');\n    const $sort = $block.find('input.participants-order');\n\n    $sortby.on('change', function () {\n      $block.attr('data-orderby', $(this).val());\n      sortParticipants($block);\n    })\n\n    $sort.on('change', function () {\n      $block.attr('data-order', $(this).val());\n      $sortbtn.find('.lbl').text($(this).data('label'));\n      sortParticipants($block);\n    })\n\n    $sortbtn.on('click', function (e) {\n      e.preventDefault();\n      const order = $block.attr('data-order') === 'ASC' ? 'DESC' : 'ASC';\n      $block.attr('data-order', order);\n      $block.find('input[value=\"' + order + '\"]').prop('checked', true);\n      $(this).find('.lbl').text($block.find('input.participants-order:checked').data('label'));\n      sortParticipants($block);\n    })\n\n    sortParticipants($block);\n\n  });\n\n}\n","/**\n * Tree Agora Folio Module Script\n */\n\n\n/**\n * Nota: Profundidad y visibilidad de las lineas determinada por estilos vía Media Queries\n * Si cambian estos parámetros hay que modificar media queries\n */\nconst deepXS = 4;\t\t\t// max threading deep for small displays\nconst deepSM = 7;\t\t\t// max threading deep for medium displays\nconst deepLG = 10;\t\t    // max threading deep for large displays\n\nconst DIR_NEW = 'newest';\nconst DIR_OLD = 'oldest';\n\nlet treeCount = 0;\nlet treePaths = [];\nlet treeData = [];\n\n\n/**\n * Setup tree view\n */\nexport const setupTree = function () {\n    setEvents();\n    getTreePaths();\n    deepClasses();\n};\n\nvar setEvents = function () {\n\n    const $doc = $(document);\n\n    // Expand collapse tree nodes (manually: due to a bootstrap bug retaining state while redrawing toggle buttons)\n    $doc.on('click', '.agora-view-tree .node-toggle', function (e) {\n        e.preventDefault();\n        var $this = $(this);\n        var $target = $($this.attr('href'));\n        var $li = $this.closest('li.tree-item');\n        $li.toggleClass(['open-node', 'closed-node']);\n        if ($this.hasClass('collapsed')) {\n            $target.collapse('show');\n            $this.removeClass('collapsed').attr('aria-expanded', true);\n        } else {\n            $target.collapse('hide');\n            $this.addClass('collapsed').attr('aria-expanded', false);\n        }\n        return false;\n    });\n\n    // Expand collapse tree nodes (manually: due to a bootstrap bug retaining state while redrawing toggle buttons)\n    $doc.on('click', '.agora-view-tree .load-more-comments-js', function (e) {\n        e.preventDefault();\n        var $this = $(this);\n        if (!$this.hasClass('disabled')) {\n            loadMoreComments($this);\n        }\n        return false;\n    });\n\n};\n\n\n\n/**\n * Calculate tree node paths\n */\nvar getTreePaths = function () {\n    const $items = $('.agora-view-tree .tree-item');\n    var j, i, level;\n\n    treeCount = $items.length;\n\n    if (treeCount > 0) {\n\n        $items.each(function (i, item) {\n            level = $(item).parents(\"ul.tree-list\").length;\n            treePaths[i] = [];\n            treeData[i] = {\n                id: $(item).data('tree-id'),\n                'level': level,\n            }\n            for (j = 0; j < level; j++) {\n                treePaths[i][j] = \"blank\";\n            }\n        });\n\n        for (i = treeCount - 1; i >= 0; i--) {\n            level = treeData[i].level;\n            if (level > 1) {\n                getTreeNodePath(i, level);\n            }\n            getTreeNodeElm(i, level);\n        }\n\n        for (i = 0; i < treeCount; i++) {\n            renderPath(i);\n        }\n    }\n\n};\n\n\n/**\n * Calculate Therading level line node\n * @param {integer} i The message index in array\n * @param {integer} level The message level\n */\nvar getTreeNodePath = function (i, level) {\n\n    var j;\n\n    if (i > 0 && level > 1) {\n        if (treePaths[i][level - 2] !== \"node\") {\n            treePaths[i][level - 2] = \"last-node\";\n        }\n        for (j = i - 1; j >= 0; j--) {\n            if (treeData[j].level > level) {\n                treePaths[j][level - 2] = \"vline\";\n            } else if (treeData[j].level === level) {\n                treePaths[j][level - 2] = \"node\";\n            } else {\n                break;\n            }\n        }\n    }\n\n};\n\n\n/**\n * Calculate threading end node element\n * @param {integer} i The message index in array\n * @param {integer} level The message level\n */\nvar getTreeNodeElm = function (i, level) {\n\n    if (i === treeCount - 1) {\n        treePaths[i][level - 1] = \"point\";\n    } else if (treeData[i + 1].level > level) {\n        treePaths[i][level - 1] = \"toggle\";\n    } else {\n        treePaths[i][level - 1] = \"point\";\n    }\n\n};\n\n/**\n * Render tree line paths and final node elements\n * @param  {integer} idx  The tree item index in array\n * @return {string} The path html code\n */\nvar renderPath = function (idx) {\n\n    var _l = 0;\n    var _s = '';\n    var _path = treePaths[idx];\n    var _data = treeData[idx];\n    var $item = $('.tree-item[data-tree-id=\"' + _data.id + '\"]');\n    var _collapsed = $item.hasClass('closed-node');\n    var _cls = _collapsed ? 'node-toggle collapsed' : 'node-toggle';\n\n    //console.log($item.attr('id'), _cls);\n\n\n    $.each(_path, function (i, item) {\n        _l = Math.min(i + 1, deepLG);\n        //console.log(i, item, level);\n        switch (item) {\n            case 'vline':\n                _s += '<span class=\"tree-line line-v l' + _l + '\"></span>\\n';\n                break;\n            case 'node':\n                _s += '<span class=\"tree-line line-v l' + _l + '\"></span>\\n';\n                if (_l < deepLG) {\n                    _s += '<span class=\"tree-line line-h l' + _l + '\"></span>\\n';\n                }\n                break;\n            case 'last-node':\n                if (_l > 1 && idx < treeCount - 1) {\n                    _s += '<span class=\"tree-line line-h line-h-cut l' + _l + '\"></span>\\n';\n                    _s += '<span class=\"tree-line line-v line-v-cut l' + _l + '\"></span>\\n';\n                }\n                _s += '<span class=\"tree-line line-v line-v-end l' + _l + '\"></span>\\n';\n                if (_l < deepLG) {\n                    _s += '<span class=\"tree-line line-h l' + _l + '\"></span>\\n';\n                }\n                break;\n            case 'toggle':\n                _s += '<span class=\"tree-line line-v line-v-ini l' + _l + '\"></span>\\n';\n                _s += '<a id=\"node_toggle_' + _data.id + '\" href=\"#node_list_' + _data.id + '\" class=\"' + _cls + '\" data-target=\"#node_list_' + _data.id + '\" role=\"button\" aria-expanded=\"' + !_collapsed + '\" aria-controls=\"node_list_' + _data.id + '\">\\n';\n                _s += '<span class=\"toggle\" aria-hidden=\"true\"></span>\\n';\n                _s += '<span class=\"sr-only\">' + agoraFolioData.t.expandCollapse + ': ' + _data.id + '</span>\\n';\n                _s += '</a>\\n';\n                break;\n            case 'point':\n                _s += '<span class=\"final-node\"></span>\\n';\n                break;\n        }\n\n    });\n\n    var $node = $item.children('.tree-node');\n    if ($node) {\n        if ($node.children('.tree-draw').length > 0) {\n            $node.children('.tree-draw').html(_s);\n        } else {\n            $node.prepend('<span class=\"tree-draw\">' + _s + '</span>');\n        }\n    }\n\n};\n\n\n/**\n * Assign deepest clasess for responsive purposes\n */\nvar deepClasses = function () {\n    var _xs_deep_cls = [];\n    var _sm_deep_cls = [];\n    var i;\n\n    for (i = deepXS; i < deepSM; i++) {\n        _xs_deep_cls.push('.tree-item-l' + i);\n    }\n\n    for (i = deepSM; i < deepLG; i++) {\n        _sm_deep_cls.push('.tree-item-l' + i);\n    }\n\n    $(_xs_deep_cls.join()).last().addClass('deepest-xs');\n    $(_sm_deep_cls.join()).last().addClass('deepest-sm');\n    $(\".tree-item-l\" + deepLG).last().addClass('deepest-lg');\n\n};\n\n\n/**\n  * Load post content vía ajax in tree\n  * @param {object} $item jquery element\n  */\nconst loadMoreComments = function ($item) {\n\n    const _post_id = $item.data('post-id');\n    const _dir = $item.data('dir');\n    const _pages = parseInt($item.data('pages'), 10);\n    const $more = $item.closest('li.tree-item');\n\n    let _page = parseInt($item.data('page'), 10);\n\n    if (_post_id) {\n\n        if (_dir === DIR_NEW) {\n            _page -= 1;\n        } else {\n            _page += 1;\n        }\n\n        $.post({\n            url: agoraFolioData.ajaxurl,\n            data: {\n                _ajax_nonce: agoraFolioData.nonce,\n                action: \"load_more_comments_tree_ajax\",\n                post_id: _post_id,\n                page: _page,\n            },\n            beforeSend: function () {\n                $item.addClass('disabled');\n                $item.find('.label').text(agoraFolioData.t.loading);\n                $item.find('.icon').addClass('loading');\n            }\n        })\n            .done(function (data) {\n                if (data.result) {\n                    const $result = $(data.result);\n                    $more.before($result);\n                    $item.removeClass('disabled');\n                    $item.find('.label').text(agoraFolioData.t.loadMore);\n                    $item.find('.icon').removeClass('loading');\n                    $item.data('page', _page).attr('data-page', _page);\n                    if ((_dir === DIR_NEW && _page === 1) || _dir === DIR_OLD && _page === _pages) {\n                        $more.remove();\n                    }\n                    if (typeof ($.fn.pdfEmbedder) != 'undefined') {\n                        $result.find('.pdfemb-viewer').pdfEmbedder();\n                    }\n                } else {\n                    $more.remove();\n                }\n            })\n            .fail(function () {\n                $more.remove();\n            })\n            .always(function () {\n                getTreePaths();\n            });\n\n    }\n};","/**\n * Main Agora Folio Application Script\n */\n\n\n/**\n * Boostrap dependencies\n * NOTE: Popover, dropdowns and tooltip require popper and util modules. Popovers also require tooltip\n */\nimport 'popper.js';\n//import 'bootstrap';\nimport 'bootstrap/js/dist/util';\nimport 'bootstrap/js/dist/alert';\n//import 'bootstrap/js/dist/button';\nimport 'bootstrap/js/dist/collapse';\nimport 'bootstrap/js/dist/dropdown';\nimport 'bootstrap/js/dist/modal';\n//import 'bootstrap/js/dist/popover';\n//import 'bootstrap/js/dist/scrollspy';\n//import 'bootstrap/js/dist/tab';\n//import 'bootstrap/js/dist/toast';\nimport 'bootstrap/js/dist/tooltip';\n\n\n/**\n * Another Dependencies\n */\nimport Cookies from 'js-cookie';                    // manage cookies\nimport objectFitImages from 'object-fit-images';    // object-fit polyfill\nimport shave from 'shave';\n//import Masonry from 'masonry-layout';\n\n/**\n * App modules\n */\nimport { debounce, isMobile, goTo, replaceUrlParam } from './modules/utils.js';\nimport { setupWidgets } from './modules/widgets.js';\nimport { setupTree } from './modules/tree.js';\n\n\n\n(function ($, themeData) {\n\n  'use strict';\n\n  // Expose jquery to modules\n  window.jQuery = $;\n  window.$ = $;\n\n  // Aux constants\n  const $body = $('body');\n  const $win = $(window);\n  const $doc = $(document);\n  const $goup = $('.sticky-scroll');\n  const breakpoint = 768;\n  const isSingle = $body.hasClass('single');\n\n  const SINGLE_VIEW = 'single';\n  const GRID_VIEW = 'grid';\n  const LIST_VIEW = 'list';\n  const FULL_VIEW = 'full';\n  const TREE_VIEW = 'tree';\n\n  const DIR_NEW = 'newest';\n  const DIR_OLD = 'oldest';\n\n\n  /* Nota: la profundidad y visibilidad de las lineas se determina por estilos vía Media Queries, no cambiar estos parámetros */\n  const deepXS = 4;\t\t\t// max threading deep for small displays\n  const deepSM = 7;\t\t\t// max threading deep for medium displays\n  const deepLG = 10;\t\t// max threading deep for large displays\n\n  // Aux variables\n  let ww = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n  let currentView = '';\n\n  let treeCount = 0;\n  let treePaths = [];\n  let treeData = [];\n\n  let msnry = null;\n\n\n  /**\n   * On resize event handler (debounced)\n   */\n  const onResize = debounce(() => {\n    ww = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n    if (ww > breakpoint) {\n      $body.removeClass('device-sm');\n    } else {\n      $body.addClass('device-sm');\n    }\n    truncate()\n\n    $(\".img-cover.fade.show\").each(function () {\n      fitThumb(this);\n    });\n\n  }, 50, false);\n\n\n  /**\n   * On scroll event handler (debounced)\n   */\n  const onScroll = debounce(() => {\n    if ($win.scrollTop() > 340) {\n      $goup.removeClass('off');\n    } else {\n      $goup.addClass('off');\n    }\n  }, 100, true)\n\n\n  /**\n   * Append external icon to item\n   * @param {object} item dom element\n   */\n  const appendExternalIcon = function (item) {\n    var $item = $(item);\n    if (!$item.find('.icon--external-link').length) {\n      $item.append(`<span aria-hidden=\"true\" class=\"icon icon--small icon--external-link\"></span><span class=\"icon-alt\">${themeData.t.externalLink}</span>`);\n    }\n  }\n\n  /**\n   * Sum fixed elements to offset\n   */\n  const getOffset = function (offset) {\n    const $header = $('.site-header');\n    const $menu = $('.site-menu');\n    offset = offset || 0;\n\n    if ($header.length) {\n      offset += $header.height();\n    }\n\n    if ($menu.length && !$body.hasClass('device-sm')) {\n      offset += $menu.height();\n    }\n\n    if ($('body').hasClass('admin-bar')) {\n      offset += $('#wpadminbar').height();\n    }\n\n    return offset;\n  }\n\n  /**\n   * Truncate texts\n   */\n  const truncate = function () {\n    const $truncate = $('.truncate');\n    $truncate.each(function () {\n      const $this = $(this);\n\n      if (!$this.data('text')) {\n        $this.data('text', this.textContent);\n      }\n\n      if (!$this.data('height')) {\n        $this.data('height', $this.height())\n      }\n\n      const t = $this.data('text');\n      this.textContent = t;\n\n      shave(this, $this.data('height'));\n\n      if ($this.find('.js-shave').length) {\n        $this.attr('title', t);\n      } else {\n        $this.removeAttr('title');\n      }\n\n      if ($this.attr('target') === '_blank') {\n        appendExternalIcon(this);\n      }\n\n      if ($this.data('mega-indicator') && !$this.find('.mega-indicator').length) {\n        $this.append($this.data('mega-indicator'));\n      }\n\n    })\n  }\n\n\n  /**\n   * Setup main menu\n   */\n  const setupMenu = function () {\n\n    // Megamenu accessibility\n    if (themeData.megamenu === '1') {\n      $('.mega-menu-wrap').each(function () {\n        var $this = $(this);\n        var $menu = $this.find('.mega-menu');\n        var $toggle = $this.find('.mega-menu-toggle button');\n\n        if ($menu.length && $toggle.length) {\n          var cls = '';\n          $toggle.attr('aria-controls', $menu.attr('id'));\n          if ($menu.data('effect-mobile') == 'slide_left') cls = 'slide-left';\n          if ($menu.data('effect-mobile') == 'slide_right') cls = 'slide-right';\n          if (cls !== '') {\n            $this.append(`<button class=\"btn btn-menu-close ${cls}\" type=\"button\" aria-controls=\"${$menu.attr('id')}\" aria-label=\"${themeData.t.closeMenu}\"><span class=\"icon icon--close\" aria-hidden=\"true\"></span></button>`);\n          }\n        }\n      });\n\n      $(\"ul#mega-menu-primary-menu\").on(\"mmm:showMobileMenu\", function () {\n        $(this).parent().find('.btn-menu-close').addClass('open');\n      });\n\n      $(\"ul#mega-menu-primary-menu\").on(\"mmm:hideMobileMenu\", function () {\n        $(this).parent().find('.btn-menu-close').removeClass('open');\n      });\n    }\n\n    // Truncate items\n    const $truncate = $('.site-menu ul.navbar-nav > li > a.nav-link, .site-menu .mega-menu > .mega-menu-item > .mega-menu-link');\n    $truncate.addClass('truncate');\n    $truncate.each(function () {\n      const $this = $(this);\n      const t = this.textContent;\n      $this.data('text', t).data('height', 68).attr('aria-label', t);\n      if ($this.find('.mega-indicator').length) $this.data('mega-indicator', $this.find('.mega-indicator'));\n    })\n\n    // Add External links\n    const $external = $('.site-menu ul.navbar-nav a[target=_blank], .site-menu .mega-menu-link[target=_blank], .site-menu .list--menu a[target=_blank]');\n    $external.each(function () {\n      appendExternalIcon(this);\n    })\n\n  }\n\n  /**\n   * Setup agora sort forms\n   */\n  const setupSort = function () {\n\n    $doc.on('click', '.dropdown-sort .dropdown-menu', function (e) {\n      e.stopPropagation();\n    });\n\n    $doc.on('change', '.dropdown-sort input[type=\"radio\"]', function (e) {\n      $(this).closest('.form-sort').trigger('submit');\n      setTimeout(function(){\n        $('.dropdown-sort .dropdown-toggle').dropdown('hide');\n      }, 100);\n    });\n\n    $doc.on('hide.bs.dropdown', '.dropdown-sort', function () {\n      $(this).find('.form-sort').trigger('submit');\n    });\n\n    $doc.on('click', '.btn-modal-sort', function () {\n      const $modal = $(this).closest('.modal');\n      $modal.modal('hide');\n      $modal.find('.form-sort').trigger('submit');\n    });\n\n    $doc.on('submit', '.form-sort-agoras', function (e) {\n      const $this = $(this);\n      if ($this.data('orderby') === $this.find('input[name=\"orderby\"]:checked').val() && $this.data('order') === $this.find('input[name=\"order\"]:checked').val()) {\n        e.preventDefault();\n      }\n    });\n\n  }\n\n  /**\n   * \n   * @param {object} e event\n   * @param {object} $anchor  collapse jquery anchor\n   */\n  const scrollToArea = function (e, $anchor, offset) {\n    offset = offset || 0;\n    const $collapse = $anchor.closest('.entry-article').find('.entry-collapse');\n    if ($collapse.length) {\n      e.preventDefault();\n      const delay = $collapse.hasClass('show') ? 0 : 500;\n      $collapse.collapse('show');\n      if ($anchor.length) {\n        setTimeout(function () {\n          goTo($anchor[0], 'smooth', offset, function () {\n            const x = window.scrollX, y = window.scrollY;\n            $anchor.parent()[0].focus();\n            if (isSingle) window.location.hash = $anchor.attr('name');\n            window.scrollTo(x, y);\n          });\n        }, delay);\n      }\n    } else if ($anchor.length) {\n      e.preventDefault();\n      goTo($anchor[0], 'smooth', offset, function () {\n        const x = window.scrollX, y = window.scrollY;\n        $anchor.parent()[0].focus();\n        if (isSingle) window.location.hash = $anchor.attr('name');\n        window.scrollTo(x, y);\n      });\n    }\n  };\n\n\n  /**\n   * Setup agora view modes\n   */\n  const setupView = function () {\n\n    if (!$('.nav-actions').length || $('.agora-view').data('view') === SINGLE_VIEW) {\n      return false;\n    }\n\n    const $collapsible = $('.entry-collapse');\n\n    $collapsible.on('show.bs.collapse', function () {\n      $(this).parent().addClass('expanded');\n      if (themeData.listAjax === '1') {\n        loadContent($(this));\n      }\n    })\n\n    $collapsible.on('hide.bs.collapse', function () {\n      $(this).parent().removeClass('expanded');\n    })\n\n    const view = $('.js-change-agora-view.active').data('view') || Cookies.get('agora-view', view) || GRID_VIEW;\n    setView(view);\n\n    $doc.on('click', '.js-change-agora-view', function (e) {\n      const view = $(this).data('view') || GRID_VIEW;\n      if (currentView !== TREE_VIEW && view !== TREE_VIEW) {\n        e.preventDefault();\n        setView(view);\n        replaceUrlParam(window.location.href, 'view', view);\n        // This is to add this information on datamart\n        $.post(themeData.ajaxurl, {\n          _ajax_nonce: themeData.nonce,\n          action: \"change_agora_view\",\n          view: view\n        })\n      }\n    });\n\n  }\n\n\n  /**\n   * Set agora view mode\n   * @param {string} view view mode\n   */\n  const setView = function (view) {\n\n    currentView = view;\n\n    $('.js-change-agora-view.active').removeClass('active').removeAttr('aria-current');\n    $(`.js-change-agora-view[data-view=${view}]`).addClass('active').attr('aria-current', true);\n    $('.agora-view.view-row').attr('data-view', view);\n\n    if (view === GRID_VIEW) {\n      $('.nav-actions-mobile .js-change-agora-view[data-view=\"list\"]').addClass('active').attr('aria-current', true);\n    }\n\n    const $collapsible = $('.entry-collapse');\n\n    if (view === FULL_VIEW) {\n      $collapsible.collapse('show');\n    } else {\n      $collapsible.collapse('hide');\n    }\n\n    if (themeData.cookies === '1') {\n      Cookies.set('agora-view', view, { expires: 7 });\n    } else {\n      Cookies.set('agora-view', view);\n    }\n\n    /*\n    if (view === GRID_VIEW) {\n      setTimeout(function(){\n        msnry = new Masonry( document.querySelector('.agora-view'), {\n          itemSelector: '.view-col',\n          \"percentPosition\": true \n        });\n      },300);\n    }else if(msnry){\n      msnry.destroy();\n      msnry = null;\n    }*/\n\n  }\n\n  /**\n   * Reset tinymce comment editor if enabled\n   */\n  const resetCommentEditor = function (){\n    if (typeof (tinyMCE) !== 'undefined') {\n      const editor = tinymce.get('comment');\n      const editor_switch = typeof (window.switchEditors) !== 'undefied' && typeof (window.switchEditors.go) !== 'undefined';\n      const editor_hidden = editor && editor_switch && editor.isHidden();\n      if (editor){\n        $('textarea#comment').height(editor.settings.height || 240);\n        if(editor_switch && editor_hidden){\n          window.switchEditors.go('comment','tmce'); \n        }\n        tinymce.EditorManager.execCommand('mceRemoveEditor', true, 'comment');\n        tinymce.EditorManager.execCommand('mceAddEditor', true, 'comment'); \n      }\n    }\n  }\n\n  /**\n   * Setup generic events\n   */\n  const setupEvents = function () {\n\n    // Resize event\n    $win.on('resize', function () {\n      onResize();\n    });\n\n    // Scroll event\n    $win.on('scroll', function () {\n      onScroll();\n    });\n\n    // Go to top scroll\n    $goup.on('click', function () {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      return false;\n    });\n\n    // Debate\n    $doc.on('click', '.btn--debate', function (e) {\n      if (currentView !== GRID_VIEW && (isSingle || themeData.listComments === '1')) {\n        e.preventDefault();\n        const $this = $(this);\n        const $anchor = $this.closest('.entry-article').find('.entry-comments > .anchor');\n        scrollToArea(e, $anchor, 100);\n        if($this.hasClass('no-comments')){\n            $this.closest('.entry-article').find('.btn-comment-list').trigger('click');\n        }\n      }\n    });\n\n    // Evaluation anchor link\n    $doc.on('click', '.btn--evaluable', function (e) {\n      if (currentView !== GRID_VIEW) {\n        e.preventDefault();\n        const $anchor = $(this).closest('.entry-article').find('.evaluation-area > .anchor');\n        scrollToArea(e, $anchor, 100);\n      }\n    });\n\n    // Manage comments form in lists if enabled or tree\n    if (themeData.listComments === '1') {\n\n      $doc.on('click', '.btn-comment-list', function (e) {\n        e.preventDefault();\n\n        const $this = $(this);\n        const $parent = $this.parent();\n        const $respond = $('#respond');\n        const $reply = $respond.find('#reply-title');\n\n        $respond.find('#comment_post_ID').val($this.data('id'));\n        $respond.find('#comment_parent').val(0);\n        if ($reply.length > 0) {\n          $reply[0].firstChild.textContent = themeData.t.leaveReply;\n        }\n        $respond.find('#cancel-comment-reply-link').hide();\n        $parent.find('#wp-temp-form-div').remove();\n        $parent.prepend($respond);\n\n        resetCommentEditor();\n\n        const $elm = $respond.find('input:not(:hidden):not(:disabled), select:not(:hidden):not(:disabled), textarea:not(:hidden):not(:disabled)').first();\n        if ($elm.length) $elm.trigger('focus');\n\n        $(document).trigger( \"folio-comment-access:reset\" );\n\n      });\n\n\n      $doc.on('click', '.agora-view .view-col .load-more-comments-js', function (e) {\n        e.preventDefault();\n        var $this = $(this);\n        if (!$this.hasClass('disabled')) {\n          loadMoreComments($this);\n        }\n        return false;\n      });\n\n\n      // reposition comment form placeholder in comments lists\n      if ( typeof addComment !== 'undefined' ) {\n\n        addComment._agora_folio_theme_moveForm = addComment.moveForm;\n\n        addComment.moveForm = function ( commId, parentId, respondId, postId ) {\n            var returnValue = addComment._agora_folio_theme_moveForm( commId, parentId, respondId, postId );\n\n            var $place = $('#post-' + postId + ' .entry-comment-list');\n            if($place.length > 0){\n              $('#wp-temp-form-div').prependTo($place);\n            }\n\n            return returnValue;\n        };\n      }\n\n\n    }\n\n    // Fetch all the forms we want to apply custom validation styles to\n    $doc.on('submit', '.needs-validation', function (e) {\n      if (!this.checkValidity()) {\n        e.preventDefault();\n        e.stopPropagation();\n        const el = document.querySelector('.needs-validation :invalid');\n        if (el) {\n          goTo(el, 'smooth', getOffset(100), function () {\n            el.focus();\n          });\n        }\n      }\n      $(this).addClass('was-validated');\n    });\n\n\n    // Tooltips\n    $('[data-toggle=\"tooltip\"]').tooltip({\n      animated: 'fade'\n    });\n\n  }\n\n\n  /**\n   * Setup evaluation form\n   */\n  const setupEvaluation = function () {\n\n    if (!$('.evaluation-area').length) return false;\n\n    $doc.on('click', '.publish-grade-submit', function (e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const id = $this.data('id');\n      const activityId = $this.data('submissionid');\n      const grade = $('.radio-options-inline-grade-' + id + ':checked').val();\n      const feedback = evaluation_tinymce_get_content('evaluation-textarea-' + id);\n      const visibility = $('.publish-grade-radio-' + id + ':checked').val();\n      const result_holder = $('#result-uoc-rac-box-' + id);\n      const ok_icon = '<span class=\"icon icon--checkmark icon--normal icon--after\" aria-hidden=\"true\"></span>';\n      const ko_icon = '<span class=\"icon icon--alert icon--normal icon--after\" aria-hidden=\"true\"></span>';\n\n      $this.attr(\"disabled\", true);\n      result_holder.show();\n      result_holder.removeClass('alert--icon-before alert--icon-after alert--success-alternative alert--error-alternative');\n      result_holder.html('<div class=\"loading\">' + themeData.t.saving + '</div>');\n      if (result_holder.length) {\n        goTo(result_holder[0], 'smooth', getOffset(100), function () {\n          result_holder[0].focus();\n        });\n      }\n\n      $.ajax({\n        type: 'POST',\n        url: themeData.ajaxurl,\n        data: {\n          'action': themeData.setGradeAction,\n          'id': activityId,\n          'postid': id,\n          'grade': grade,\n          'feedback': feedback,\n          'visibility': visibility\n        },\n        success: function (response) {\n          if (response && 'undefined' !== typeof response) {\n            if (response.success) {\n              result_holder.html(ok_icon + themeData.t.success);\n              result_holder.addClass('alert--icon-after alert--success-alternative');\n              const $btn = $(\"#btn-evaluable-\" + id);\n              $btn.children('.lbl').text(themeData.t.evaluated);\n              $btn.children('.grade').html(grade);\n              $(\".evaluation-status-\" + id).text(themeData.t.evaluated);\n              $this.closest('.evaluation-box').removeClass('pending').addClass('sent');\n            } else {\n              result_holder.addClass('alert--icon-after alert--error-alternative');\n              result_holder.html(ko_icon + response.data.message);\n            }\n          } else {\n            result_holder.addClass('alert--icon-after alert--error-alternative');\n            result_holder.html(ko_icon + themeData.t.error_saving_grade);\n          }\n        }\n      }).fail(function () {\n        result_holder.addClass('alert--icon-after alert--error-alternative');\n        result_holder.html(ko_icon + themeData.t.error_saving_grade);\n      });\n\n    });\n\n\n    $doc.on('change', '.radio-grade-select', function () {\n      const id = $(this).data('id');\n      evaluation_enable_publish(id);\n      evaluation_set_grade_select(id, $(this));\n    });\n\n    $doc.on('change', '.publish-grade-radio', function () {\n      const id = $(this).data('id');\n      evaluation_enable_publish(id);\n      evaluation_show_help_information($(this).val(), id);\n    });\n\n    $doc.on('click', '.btn-delete-grade', function (e) {\n      e.preventDefault();\n      const id = $(this).data('id');\n      $('.radio-options-inline-grade-' + id).prop(\"checked\", false);\n      evaluation_enable_publish(id);\n      evaluation_set_grade_select(id, false);\n    });\n\n\n    $doc.on('click', '.btn--evaluate-agora', function () {\n      const $box = $(this).closest('.evaluation-box').find('.teacher-evaluation-box');\n      const id = $box.data('id');\n      const activityid = $box.data('activityid');\n      evaluation_disable_publish(id);\n      evaluation_load_grade_feedback(activityid, id, $box);\n    });\n\n    /*if ($('.teacher-evaluation-box').length > 0) {\n      $('.teacher-evaluation-box').each(function() {\n        const id = $(this).data('id');\n        const activityid = $(this).data('activityid');\n        evaluation_disable_publish(id);\n        evaluation_load_grade_feedback(activityid, id, $(this));\n      });\n    }*/\n\n  }\n\n  /**\n   * Enable evaluation publish\n   */\n  const evaluation_enable_publish = function (id) {\n    $('#result-uoc-rac-box-' + id).slideUp('fast');\n    $('#publish-grade-submit-' + id).attr(\"disabled\", false);\n  }\n\n  /**\n   * Disable evaluation publish\n   */\n  const evaluation_disable_publish = function (id) {\n    $('#publish-grade-submit-' + id).attr(\"disabled\", true);\n  }\n\n  /**\n   * Load evaluation grade feedback\n   */\n  const evaluation_load_grade_feedback = function (activityid, id, $box) {\n    const $loading = $box.closest('.evaluation-box').find('.evaluation-loading');\n    $loading.show();\n    $box.hide();\n\n    $.ajax({\n      type: 'GET',\n      url: themeData.ajaxurl,\n      data: {\n        'action': themeData.getFeedbackGradeAction,\n        'id': activityid\n      },\n      success: function (response) {\n        if (response && 'undefined' !== typeof response) {\n          if (response.success) {\n            var grade = response.data.grade;\n            var feedback = response.data.feedback;\n            var content = feedback && feedback.text ? feedback.text : '';\n            var publish_grade = grade.publish_grade;\n\n            evaluation_mark_grade(id, grade.grade);\n            evaluation_publish_grade(publish_grade, id);\n            evaluation_tinymce_set_content(content, id, 'evaluation-textarea-' + id);\n\n          } else {\n            if (response && response.data) {\n              $box.html(response.data.message);\n            } else {\n              $box.html(themeData.t.error_loading_grade);\n            }\n          }\n        }\n      }\n    }).fail(function () {\n      $box.html(themeData.t.error_loading_grade);\n    }).always(function () {\n      $loading.hide();\n      $box.show();\n    });\n  }\n\n\n  /**\n   * Aux method evaluation mark grade\n   */\n  const evaluation_mark_grade = function (id, grade) {\n    if (grade == null) {\n      grade = \"\";\n    }\n    grade = grade.replace('+', 'plus');\n    $('#radio-options-inline-grade-' + grade + '-' + id).prop(\"checked\", true);\n    evaluation_set_grade_select(id, $('#radio-options-inline-grade-' + grade + '-' + id));\n  }\n\n  /**\n   * Aux method evaluation set grade\n   */\n  const evaluation_set_grade_select = function (id, elem) {\n    $('.label-grade-select-' + id).removeClass('selected-grade');\n    if (elem) {\n      $(elem).parent().addClass('selected-grade');\n    }\n  }\n\n  /**\n   * Aux method to set tinymce content\n   */\n  const evaluation_tinymce_set_content = function (content, id, editor_id, textarea_id) {\n    if (typeof editor_id == 'undefined') editor_id = wpActiveEditor;\n    if (typeof textarea_id == 'undefined') textarea_id = editor_id;\n    const $textarea = $('#' + textarea_id);\n\n    if ($('#wp-' + editor_id + '-wrap').hasClass('tmce-active')) {\n      const $editor = tinyMCE.get(editor_id);\n      $editor.setContent(content);\n      $editor.on('input change', function () {\n        evaluation_enable_publish(id);\n      });\n    } else {\n      $textarea.val(content);\n    }\n\n    $textarea.on('input change', function () {\n      evaluation_enable_publish(id);\n    });\n  }\n\n  /**\n   * Aux method evaluation grade\n   */\n  const evaluation_publish_grade = function (val, id) {\n    $('.publish-grade-radio-' + id).prop(\"checked\", false);\n    $('#publish-grade-radio-' + id + '-' + val).prop(\"checked\", true);\n    evaluation_show_help_information(val, id);\n  }\n\n  /**\n   * Aux method display evaluation help info\n   */\n  const evaluation_show_help_information = function (val, id) {\n    if (val == 'now') {\n      $('#info_publish_grade_now_' + id).show();\n      $('#info_program_publish_grade_' + id).hide();\n    } else {\n      $('#info_publish_grade_now_' + id).hide();\n      $('#info_program_publish_grade_' + id).show();\n    }\n  }\n\n  /**\n   * Aux method to get tinymce content\n   */\n  const evaluation_tinymce_get_content = function (editor_id, textarea_id) {\n    if (typeof editor_id == 'undefined') editor_id = wpActiveEditor;\n    if (typeof textarea_id == 'undefined') textarea_id = editor_id;\n\n    if ($('#wp-' + editor_id + '-wrap').hasClass('tmce-active') && tinyMCE.get(editor_id)) {\n      return tinyMCE.get(editor_id).getContent();\n    } else {\n      return $('#' + textarea_id).val();\n    }\n  }\n\n  /**\n   * Load post content vía ajax in lists\n   * @param {object} $container jquery element\n   */\n  const loadContent = function ($container) {\n    const _post_id = $container.data('post-id');\n    if (_post_id && !$container.hasClass('loaded')) {\n      $container.children('.entry-body').html('<div class=\"loading mb-3\">' + themeData.t.loading + '</div>');\n      $.post(themeData.ajaxurl, {\n        _ajax_nonce: themeData.nonce,\n        action: \"get_ajax_agora_post\",\n        post_id: _post_id\n      })\n        .done(function (data) {\n          $container.find('.loading').remove();\n          if (data.result) {\n            $container.addClass('loaded');\n            $container.children('.entry-body').html(data.result);\n            if (typeof ($.fn.pdfEmbedder) != 'undefined') {\n              $container.find('.pdfemb-viewer').pdfEmbedder();\n            }\n            if (data.pdf_url) {\n              $container.find('a.dkpdf-button').attr('href', data.pdf_url);\n            }\n          }\n        })\n        .fail(function () {\n          $container.find('.loading').remove();\n        });\n    }\n  }\n\n\n  /**\n   * Load post content vía ajax in lists\n   * @param {object} $item jquery element\n   */\n  const loadMoreComments = function ($item) {\n\n    const _post_id = $item.data('post-id');\n    const _dir = $item.data('dir');\n    const _pages = parseInt($item.data('pages'), 10);\n    const $more = $item.closest('.load-more');\n\n    let _page = parseInt($item.data('page'), 10);\n\n    if (_post_id) {\n\n      if (_dir === DIR_NEW) {\n        _page -= 1;\n      } else {\n        _page += 1;\n      }\n\n      $.post({\n        url: agoraFolioData.ajaxurl,\n        data: {\n          _ajax_nonce: agoraFolioData.nonce,\n          action: \"load_more_comments_list_ajax\",\n          post_id: _post_id,\n          page: _page,\n        },\n        beforeSend: function () {\n          $item.addClass('disabled');\n          $item.find('.label').text(agoraFolioData.t.loading);\n          $item.find('.icon').addClass('loading');\n        }\n      })\n        .done(function (data) {\n          if (data.result) {\n            const $result = $(data.result);\n            $more.closest('.view-col').find('.comment-list').append($result);\n            $item.removeClass('disabled');\n            $item.find('.label').text(agoraFolioData.t.loadMore);\n            $item.find('.icon').removeClass('loading');\n            $item.data('page', _page).attr('data-page', _page);\n            if ((_dir === DIR_NEW && _page === 1) || _dir === DIR_OLD && _page === _pages) {\n              $more.remove();\n            }\n            if (typeof ($.fn.pdfEmbedder) != 'undefined') {\n              $result.find('.pdfemb-viewer').pdfEmbedder();\n            }\n          } else {\n            $more.remove();\n          }\n        })\n        .fail(function () {\n          $more.remove();\n        });\n\n    }\n  };\n\n  /**\n   * Set object fit image \n   * @param {object} img image object\n   * @returns \n   */\n  const fitThumb = function (img) {\n\n    if (!img) return false;\n\n    const $img = $(img);\n    const w = img.naturalWidth;\n    const h = img.naturalHeight;\n\n    $img.addClass('show');\n\n    if (!w || !h) return false;\n\n    if (w < $img.parent().width() || h < $img.parent().height()) {\n      $img.addClass('contain');\n    } else {\n      $img.removeClass('contain');\n    }\n\n  }\n\n  /**\n   * Position and Fade In image thumbnails after load complete\n   */\n  const preloadThumbs = function () {\n    $(\".img-cover.fade:not(.show)\").on(\"load\", function () {\n      fitThumb(this);\n    }).each(function () {\n      // lanzamos el evento load si no se ejecuta para imágenes almacenadas en caché\n      if (this.complete) $(this).trigger(\"load\");\n    });\n  };\n\n\n  /**\n   * Initialize application\n   */\n  $(function () {\n    console.log('🚀 AgoraFolio is ready!');\n    if (isMobile.any()) $body.addClass('device-touch');\n    preloadThumbs();\n    objectFitImages('img.img-cover');\n    setupMenu();\n    setupView();\n    setupSort();\n    setupEvents();\n    setupTree();\n    setupWidgets();\n    setupEvaluation();\n    onResize();\n  })\n\n})(jQuery, typeof agoraFolioData !== 'undefined' ? agoraFolioData : {});","module.exports = jQuery;"],"sourceRoot":""}