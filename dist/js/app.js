(self.webpackChunkagora_folio=self.webpackChunkagora_folio||[]).push([[773],{221:function(e,a,t){"use strict";t(9826),t(2222),t(5306),t(4916),t(6801),t(5511),t(3863),t(9872),t(7424),t(3824);var n=t(6808),i=t.n(n),o=t(6797),r=t.n(o),d=t(8433),l=(t(4723),t(6977),t(1249),t(4603),t(9714),t(4765),function(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=null;return function(){var i=arguments,o=this,r=t&&!n,d=function(){return e.apply(o,i)};clearTimeout(n),n=setTimeout(d,a),r&&d()}}),s={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return s.Android()||s.BlackBerry()||s.iOS()||s.Opera()||s.Windows()}},c=function(e,a,t,n){a=a||"smooth",t=t||0;var i=(e.getBoundingClientRect().top+(window.scrollY||document.documentElement.scrollTop)-t).toFixed(),o=function e(){window.pageYOffset.toFixed()===i&&(window.removeEventListener("scroll",e),n&&n())};window.addEventListener("scroll",o),o(),window.scrollTo({top:i,behavior:a})},u=function(e){var a=e.attr("data-orderby"),t="name"===a?"surname":"name",n=e.attr("data-order"),i=e.find(".list--participants");i.children("li").sort((function(e,i){var o=$(e).attr("data-"+a),r=$(i).attr("data-"+a);if(o===r){var d=$(e).attr("data-"+t),l=$(i).attr("data-"+t);return"ASC"===n?d<l?-1:d>l?1:0:l<d?-1:l>d?1:0}return"ASC"===n?o<r?-1:o>r?1:0:r<o?-1:r>o?1:0})).appendTo(i)},f=function(){$(".block--participants").each((function(){var e=$(this),a=e.find(".btn-participants-sort"),t=e.find("input.participants-orderby"),n=e.find("input.participants-order");t.on("change",(function(){e.attr("data-orderby",$(this).val()),u(e)})),n.on("change",(function(){e.attr("data-order",$(this).val()),a.find(".lbl").text($(this).data("label")),u(e)})),a.on("click",(function(a){a.preventDefault();var t="ASC"===e.attr("data-order")?"DESC":"ASC";e.attr("data-order",t),e.find('input[value="'+t+'"]').prop("checked",!0),$(this).find(".lbl").text(e.find("input.participants-order:checked").data("label")),u(e)})),u(e)}))},m=(t(9600),"newest"),p=0,h=[],v=[],g=function(){var e=$(document);e.on("click",".agora-view-tree .node-toggle",(function(e){e.preventDefault();var a=$(this),t=$(a.attr("href"));return a.closest("li.tree-item").toggleClass(["open-node","closed-node"]),a.hasClass("collapsed")?(t.collapse("show"),a.removeClass("collapsed").attr("aria-expanded",!0)):(t.collapse("hide"),a.addClass("collapsed").attr("aria-expanded",!1)),!1})),e.on("click",".agora-view-tree .load-more-comments-js",(function(e){e.preventDefault();var a=$(this);return a.hasClass("disabled")||y(a),!1}))},b=function(){var e,a,t,n=$(".agora-view-tree .tree-item");if((p=n.length)>0){for(n.each((function(a,n){for(t=$(n).parents("ul.tree-list").length,h[a]=[],v[a]={id:$(n).data("tree-id"),level:t},e=0;e<t;e++)h[a][e]="blank"})),a=p-1;a>=0;a--)(t=v[a].level)>1&&w(a,t),C(a,t);for(a=0;a<p;a++)_(a)}},w=function(e,a){var t;if(e>0&&a>1)for("node"!==h[e][a-2]&&(h[e][a-2]="last-node"),t=e-1;t>=0;t--)if(v[t].level>a)h[t][a-2]="vline";else{if(v[t].level!==a)break;h[t][a-2]="node"}},C=function(e,a){e===p-1?h[e][a-1]="point":v[e+1].level>a?h[e][a-1]="toggle":h[e][a-1]="point"},_=function(e){var a=0,t="",n=h[e],i=v[e],o=$('.tree-item[data-tree-id="'+i.id+'"]'),r=o.hasClass("closed-node"),d=r?"node-toggle collapsed":"node-toggle";$.each(n,(function(n,o){switch(a=Math.min(n+1,10),o){case"vline":t+='<span class="tree-line line-v l'+a+'"></span>\n';break;case"node":t+='<span class="tree-line line-v l'+a+'"></span>\n',a<10&&(t+='<span class="tree-line line-h l'+a+'"></span>\n');break;case"last-node":a>1&&e<p-1&&(t+='<span class="tree-line line-h line-h-cut l'+a+'"></span>\n',t+='<span class="tree-line line-v line-v-cut l'+a+'"></span>\n'),t+='<span class="tree-line line-v line-v-end l'+a+'"></span>\n',a<10&&(t+='<span class="tree-line line-h l'+a+'"></span>\n');break;case"toggle":t+='<span class="tree-line line-v line-v-ini l'+a+'"></span>\n',t+='<a id="node_toggle_'+i.id+'" href="#node_list_'+i.id+'" class="'+d+'" data-target="#node_list_'+i.id+'" role="button" aria-expanded="'+!r+'" aria-controls="node_list_'+i.id+'">\n',t+='<span class="toggle" aria-hidden="true"></span>\n',t+='<span class="sr-only">'+agoraFolioData.t.expandCollapse+": "+i.id+"</span>\n",t+="</a>\n";break;case"point":t+='<span class="final-node"></span>\n'}}));var l=o.children(".tree-node");l&&(l.children(".tree-draw").length>0?l.children(".tree-draw").html(t):l.prepend('<span class="tree-draw">'+t+"</span>"))},x=function(){var e,a=[],t=[];for(e=4;e<7;e++)a.push(".tree-item-l"+e);for(e=7;e<10;e++)t.push(".tree-item-l"+e);$(a.join()).last().addClass("deepest-xs"),$(t.join()).last().addClass("deepest-sm"),$(".tree-item-l10").last().addClass("deepest-lg")},y=function(e){var a=e.data("post-id"),t=e.data("dir"),n=parseInt(e.data("pages"),10),i=e.closest("li.tree-item"),o=parseInt(e.data("page"),10);a&&(t===m?o-=1:o+=1,$.post({url:agoraFolioData.ajaxurl,data:{_ajax_nonce:agoraFolioData.nonce,action:"load_more_comments_tree_ajax",post_id:a,page:o},beforeSend:function(){e.addClass("disabled"),e.find(".label").text(agoraFolioData.t.loading),e.find(".icon").addClass("loading")}}).done((function(a){if(a.result){var r=$(a.result);i.before(r),e.removeClass("disabled"),e.find(".label").text(agoraFolioData.t.loadMore),e.find(".icon").removeClass("loading"),e.data("page",o).attr("data-page",o),(t===m&&1===o||"oldest"===t&&o===n)&&i.remove(),void 0!==$.fn.pdfEmbedder&&r.find(".pdfemb-viewer").pdfEmbedder()}else i.remove()})).fail((function(){i.remove()})).always((function(){b()})))};!function(e,a){window.jQuery=e,window.$=e;var t=e("body"),n=e(window),o=e(document),u=e(".sticky-scroll"),m=t.hasClass("single"),p="grid",h="tree",v="newest",w=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,""),C=l((function(){(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>768?t.removeClass("device-sm"):t.addClass("device-sm"),$(),e(".img-cover.fade.show").each((function(){G(this)}))}),50,!1),_=l((function(){n.scrollTop()>340?u.removeClass("off"):u.addClass("off")}),100,!0),y=function(t){var n=e(t);n.find(".icon--external-link").length||n.append('<span aria-hidden="true" class="icon icon--small icon--external-link"></span><span class="icon-alt">'.concat(a.t.externalLink,"</span>"))},k=function(a){var n=e(".site-header"),i=e(".site-menu");return a=a||0,n.length&&(a+=n.height()),i.length&&!t.hasClass("device-sm")&&(a+=i.height()),e("body").hasClass("admin-bar")&&(a+=e("#wpadminbar").height()),a},$=function(){e(".truncate").each((function(){var a=e(this);a.data("text")||a.data("text",this.textContent),a.data("height")||a.data("height",a.height());var t=a.data("text");this.textContent=t,(0,d.Z)(this,a.data("height")),a.find(".js-shave").length?a.attr("title",t):a.removeAttr("title"),"_blank"===a.attr("target")&&y(this),a.data("mega-indicator")&&!a.find(".mega-indicator").length&&a.append(a.data("mega-indicator"))}))},j=function(e,a,t){t=t||0;var n=a.closest(".entry-article").find(".entry-collapse");if(n.length){e.preventDefault();var i=n.hasClass("show")?0:500;n.collapse("show"),a.length&&setTimeout((function(){c(a[0],"smooth",t,(function(){var e=window.scrollX,t=window.scrollY;a.parent()[0].focus(),m&&(window.location.hash=a.attr("name")),window.scrollTo(e,t)}))}),i)}else a.length&&(e.preventDefault(),c(a[0],"smooth",t,(function(){var e=window.scrollX,t=window.scrollY;a.parent()[0].focus(),m&&(window.location.hash=a.attr("name")),window.scrollTo(e,t)})))},E=function(){if(!e(".nav-actions").length||"single"===e(".agora-view").data("view"))return!1;var t=e(".entry-collapse");t.on("show.bs.collapse",(function(){e(this).parent().addClass("expanded"),"1"===a.listAjax&&R(e(this))})),t.on("hide.bs.collapse",(function(){e(this).parent().removeClass("expanded")}));var n=e(".js-change-agora-view.active").data("view")||i().get("agora-view",n)||p;D(n),o.on("click",".js-change-agora-view",(function(t){var n=e(this).data("view")||p;w!==h&&n!==h&&(t.preventDefault(),D(n),function(e,a,t){null==t&&(t="");var n=new RegExp("\\b("+a+"=).*?(&|#|$)");e=e.search(n)>=0?e.replace(n,"$1"+t+"$2"):(e=e.replace(/[?#]$/,""))+(e.indexOf("?")>0?"&":"?")+a+"="+t,history&&history.replaceState(null,null,e)}(window.location.href,"view",n),e.post(a.ajaxurl,{_ajax_nonce:a.nonce,action:"change_agora_view",view:n}))}))},D=function(t){w=t,e(".js-change-agora-view.active").removeClass("active").removeAttr("aria-current"),e(".js-change-agora-view[data-view=".concat(t,"]")).addClass("active").attr("aria-current",!0),e(".agora-view.view-row").attr("data-view",t),t===p&&e('.nav-actions-mobile .js-change-agora-view[data-view="list"]').addClass("active").attr("aria-current",!0);var n=e(".entry-collapse");"full"===t?n.collapse("show"):n.collapse("hide"),"1"===a.cookies?i().set("agora-view",t,{expires:7}):i().set("agora-view",t)},A=function(){n.on("resize",(function(){C()})),n.on("scroll",(function(){_()})),u.on("click",(function(){return window.scrollTo({top:0,behavior:"smooth"}),!1})),o.on("click",".btn--debate",(function(t){if(w!==p&&(m||"1"===a.listComments)){t.preventDefault();var n=e(this),i=n.closest(".entry-article").find(".entry-comments > .anchor");j(t,i,100),n.hasClass("no-comments")&&n.closest(".entry-article").find(".btn-comment-list").trigger("click")}})),o.on("click",".btn--evaluable",(function(a){if(w!==p){a.preventDefault();var t=e(this).closest(".entry-article").find(".evaluation-area > .anchor");j(a,t,100)}})),"1"===a.listComments&&(o.on("click",".btn-comment-list",(function(t){t.preventDefault();var n=e(this),i=n.parent(),o=e("#respond"),r=o.find("#reply-title");o.find("#comment_post_ID").val(n.data("id")),o.find("#comment_parent").val(0),r.length>0&&(r[0].firstChild.textContent=a.t.leaveReply),o.find("#cancel-comment-reply-link").hide(),i.find("#wp-temp-form-div").remove(),i.prepend(o),function(){if("undefined"!=typeof tinyMCE){var a=tinymce.get("comment"),t="undefied"!=typeof window.switchEditors&&void 0!==window.switchEditors.go,n=a&&t&&a.isHidden();a&&(e("textarea#comment").height(a.settings.height||240),t&&n&&window.switchEditors.go("comment","tmce"),tinymce.EditorManager.execCommand("mceRemoveEditor",!0,"comment"),tinymce.EditorManager.execCommand("mceAddEditor",!0,"comment"))}}();var d=o.find("input:not(:hidden):not(:disabled), select:not(:hidden):not(:disabled), textarea:not(:hidden):not(:disabled)").first();d.length&&d.trigger("focus"),e(document).trigger("folio-comment-access:reset")})),o.on("click",".agora-view .view-col .load-more-comments-js",(function(a){a.preventDefault();var t=e(this);return t.hasClass("disabled")||Y(t),!1})),"undefined"!=typeof addComment&&(addComment._agora_folio_theme_moveForm=addComment.moveForm,addComment.moveForm=function(a,t,n,i){var o=addComment._agora_folio_theme_moveForm(a,t,n,i),r=e("#post-"+i+" .entry-comment-list");return r.length>0&&e("#wp-temp-form-div").prependTo(r),o})),o.on("submit",".needs-validation",(function(a){if(!this.checkValidity()){a.preventDefault(),a.stopPropagation();var t=document.querySelector(".needs-validation :invalid");t&&c(t,"smooth",k(100),(function(){t.focus()}))}e(this).addClass("was-validated")})),e('[data-toggle="tooltip"]').tooltip({animated:"fade"})},F=function(a){e("#result-uoc-rac-box-"+a).slideUp("fast"),e("#publish-grade-submit-"+a).attr("disabled",!1)},M=function(a){e("#publish-grade-submit-"+a).attr("disabled",!0)},T=function(t,n,i){var o=i.closest(".evaluation-box").find(".evaluation-loading");o.show(),i.hide(),e.ajax({type:"GET",url:a.ajaxurl,data:{action:a.getFeedbackGradeAction,id:t},success:function(e){if(e&&void 0!==e)if(e.success){var t=e.data.grade,o=e.data.feedback,r=o&&o.text?o.text:"",d=t.publish_grade;S(n,t.grade),B(d,n),O(r,n,"evaluation-textarea-"+n)}else e&&e.data?i.html(e.data.message):i.html(a.t.error_loading_grade)}}).fail((function(){i.html(a.t.error_loading_grade)})).always((function(){o.hide(),i.show()}))},S=function(a,t){null==t&&(t=""),t=t.replace("+","plus"),e("#radio-options-inline-grade-"+t+"-"+a).prop("checked",!0),W(a,e("#radio-options-inline-grade-"+t+"-"+a))},W=function(a,t){e(".label-grade-select-"+a).removeClass("selected-grade"),t&&e(t).parent().addClass("selected-grade")},O=function(a,t,n,i){void 0===n&&(n=wpActiveEditor),void 0===i&&(i=n);var o=e("#"+i);if(e("#wp-"+n+"-wrap").hasClass("tmce-active")){var r=tinyMCE.get(n);r.setContent(a),r.on("input change",(function(){F(t)}))}else o.val(a);o.on("input change",(function(){F(t)}))},B=function(a,t){e(".publish-grade-radio-"+t).prop("checked",!1),e("#publish-grade-radio-"+t+"-"+a).prop("checked",!0),I(a,t)},I=function(a,t){"now"==a?(e("#info_publish_grade_now_"+t).show(),e("#info_program_publish_grade_"+t).hide()):(e("#info_publish_grade_now_"+t).hide(),e("#info_program_publish_grade_"+t).show())},P=function(a,t){return void 0===a&&(a=wpActiveEditor),void 0===t&&(t=a),e("#wp-"+a+"-wrap").hasClass("tmce-active")&&tinyMCE.get(a)?tinyMCE.get(a).getContent():e("#"+t).val()},R=function(t){var n=t.data("post-id");n&&!t.hasClass("loaded")&&(t.children(".entry-body").html('<div class="loading mb-3">'+a.t.loading+"</div>"),e.post(a.ajaxurl,{_ajax_nonce:a.nonce,action:"get_ajax_agora_post",post_id:n}).done((function(a){t.find(".loading").remove(),a.result&&(t.addClass("loaded"),t.children(".entry-body").html(a.result),void 0!==e.fn.pdfEmbedder&&t.find(".pdfemb-viewer").pdfEmbedder(),a.pdf_url&&t.find("a.dkpdf-button").attr("href",a.pdf_url))})).fail((function(){t.find(".loading").remove()})))},Y=function(a){var t=a.data("post-id"),n=a.data("dir"),i=parseInt(a.data("pages"),10),o=a.closest(".load-more"),r=parseInt(a.data("page"),10);t&&(n===v?r-=1:r+=1,e.post({url:agoraFolioData.ajaxurl,data:{_ajax_nonce:agoraFolioData.nonce,action:"load_more_comments_list_ajax",post_id:t,page:r},beforeSend:function(){a.addClass("disabled"),a.find(".label").text(agoraFolioData.t.loading),a.find(".icon").addClass("loading")}}).done((function(t){if(t.result){var d=e(t.result);o.closest(".view-col").find(".comment-list").append(d),a.removeClass("disabled"),a.find(".label").text(agoraFolioData.t.loadMore),a.find(".icon").removeClass("loading"),a.data("page",r).attr("data-page",r),(n===v&&1===r||"oldest"===n&&r===i)&&o.remove(),void 0!==e.fn.pdfEmbedder&&d.find(".pdfemb-viewer").pdfEmbedder()}else o.remove()})).fail((function(){o.remove()})))},G=function(a){if(!a)return!1;var t=e(a),n=a.naturalWidth,i=a.naturalHeight;if(t.addClass("show"),!n||!i)return!1;n<t.parent().width()||i<t.parent().height()?t.addClass("contain"):t.removeClass("contain")};e((function(){console.log("ðŸš€ AgoraFolio is ready!"),s.any()&&t.addClass("device-touch"),e(".img-cover.fade:not(.show)").on("load",(function(){G(this)})).each((function(){this.complete&&e(this).trigger("load")})),r()("img.img-cover"),function(){"1"===a.megamenu&&(e(".mega-menu-wrap").each((function(){var t=e(this),n=t.find(".mega-menu"),i=t.find(".mega-menu-toggle button");if(n.length&&i.length){var o="";i.attr("aria-controls",n.attr("id")),"slide_left"==n.data("effect-mobile")&&(o="slide-left"),"slide_right"==n.data("effect-mobile")&&(o="slide-right"),""!==o&&t.append('<button class="btn btn-menu-close '.concat(o,'" type="button" aria-controls="').concat(n.attr("id"),'" aria-label="').concat(a.t.closeMenu,'"><span class="icon icon--close" aria-hidden="true"></span></button>'))}})),e("ul#mega-menu-primary-menu").on("mmm:showMobileMenu",(function(){e(this).parent().find(".btn-menu-close").addClass("open")})),e("ul#mega-menu-primary-menu").on("mmm:hideMobileMenu",(function(){e(this).parent().find(".btn-menu-close").removeClass("open")})));var t=e(".site-menu ul.navbar-nav > li > a.nav-link, .site-menu .mega-menu > .mega-menu-item > .mega-menu-link");t.addClass("truncate"),t.each((function(){var a=e(this),t=this.textContent;a.data("text",t).data("height",68).attr("aria-label",t),a.find(".mega-indicator").length&&a.data("mega-indicator",a.find(".mega-indicator"))})),e(".site-menu ul.navbar-nav a[target=_blank], .site-menu .mega-menu-link[target=_blank], .site-menu .list--menu a[target=_blank]").each((function(){y(this)}))}(),E(),o.on("click",".dropdown-sort .dropdown-menu",(function(e){e.stopPropagation()})),o.on("change",'.dropdown-sort input[type="radio"]',(function(a){e(this).closest(".form-sort").trigger("submit"),setTimeout((function(){e(".dropdown-sort .dropdown-toggle").dropdown("hide")}),100)})),o.on("hide.bs.dropdown",".dropdown-sort",(function(){e(this).find(".form-sort").trigger("submit")})),o.on("click",".btn-modal-sort",(function(){var a=e(this).closest(".modal");a.modal("hide"),a.find(".form-sort").trigger("submit")})),o.on("submit",".form-sort-agoras",(function(a){var t=e(this);t.data("orderby")===t.find('input[name="orderby"]:checked').val()&&t.data("order")===t.find('input[name="order"]:checked').val()&&a.preventDefault()})),A(),g(),b(),x(),f(),function(){if(!e(".evaluation-area").length)return!1;o.on("click",".publish-grade-submit",(function(t){t.preventDefault();var n=e(this),i=n.data("id"),o=n.data("submissionid"),r=e(".radio-options-inline-grade-"+i+":checked").val(),d=P("evaluation-textarea-"+i),l=e(".publish-grade-radio-"+i+":checked").val(),s=e("#result-uoc-rac-box-"+i),u='<span class="icon icon--alert icon--normal icon--after" aria-hidden="true"></span>';n.attr("disabled",!0),s.show(),s.removeClass("alert--icon-before alert--icon-after alert--success-alternative alert--error-alternative"),s.html('<div class="loading">'+a.t.saving+"</div>"),s.length&&c(s[0],"smooth",k(100),(function(){s[0].focus()})),e.ajax({type:"POST",url:a.ajaxurl,data:{action:a.setGradeAction,id:o,postid:i,grade:r,feedback:d,visibility:l},success:function(t){if(t&&void 0!==t)if(t.success){s.html('<span class="icon icon--checkmark icon--normal icon--after" aria-hidden="true"></span>'+a.t.success),s.addClass("alert--icon-after alert--success-alternative");var o=e("#btn-evaluable-"+i);o.children(".lbl").text(a.t.evaluated),o.children(".grade").html(r),e(".evaluation-status-"+i).text(a.t.evaluated),n.closest(".evaluation-box").removeClass("pending").addClass("sent")}else s.addClass("alert--icon-after alert--error-alternative"),s.html(u+t.data.message);else s.addClass("alert--icon-after alert--error-alternative"),s.html(u+a.t.error_saving_grade)}}).fail((function(){s.addClass("alert--icon-after alert--error-alternative"),s.html(u+a.t.error_saving_grade)}))})),o.on("change",".radio-grade-select",(function(){var a=e(this).data("id");F(a),W(a,e(this))})),o.on("change",".publish-grade-radio",(function(){var a=e(this).data("id");F(a),I(e(this).val(),a)})),o.on("click",".btn-delete-grade",(function(a){a.preventDefault();var t=e(this).data("id");e(".radio-options-inline-grade-"+t).prop("checked",!1),F(t),W(t,!1)})),o.on("click",".btn--evaluate-agora",(function(){var a=e(this).closest(".evaluation-box").find(".teacher-evaluation-box"),t=a.data("id"),n=a.data("activityid");M(t),T(n,t,a)}))}(),C()}))}(jQuery,"undefined"!=typeof agoraFolioData?agoraFolioData:{})},9021:function(){},7502:function(){},3135:function(){},9057:function(){},4529:function(){},3609:function(e){"use strict";e.exports=jQuery}},0,[[221,929,898],[9021,929,898],[7502,929,898],[3135,929,898],[9057,929,898],[4529,929,898]]]);
//# sourceMappingURL=app.js.map